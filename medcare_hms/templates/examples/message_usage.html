{% extends 'base_public.html' %}
{% load static %}

{% block title %}Message System Examples{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row">
        <div class="col-12">
            <h2 class="mb-4">Message System Examples</h2>
            
            <!-- Example buttons to test messaging system -->
            <div class="mb-4">
                <h4>Test Buttons (All Messages Show as Top-Right Toasts)</h4>
                <button class="btn btn-success me-2" onclick="showSuccessMessage()">Success Toast</button>
                <button class="btn btn-danger me-2" onclick="showErrorMessage()">Error Toast</button>
                <button class="btn btn-info me-2" onclick="showInfoMessage()">Info Toast</button>
                <button class="btn btn-warning me-2" onclick="showWarningMessage()">Warning Toast</button>
                <button class="btn btn-primary me-2" onclick="showMultipleMessages()">Multiple Toasts</button>
                <button class="btn btn-secondary me-2" onclick="clearAllMessages()">Clear All</button>
            </div>

            <!-- Django Messages (server-side) -->
            {% if messages %}
                <div class="mb-4">
                    <h4>Django Messages (Server-side)</h4>
                    {% for message in messages %}
                        <div class="alert alert-{% if message.tags == 'error' %}danger{% else %}{{ message.tags }}{% endif %} alert-dismissible fade show" role="alert">
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}

            <!-- Content area where inline messages will appear -->
            <div class="card">
                <div class="card-header">
                    <h5>Form Example Area</h5>
                </div>
                <div class="card-body">
                    <p>This is your page content. All messages now appear as toasts in the top-right corner, floating above all page elements.</p>
                    <p>Notice how the messages don't interfere with the page layout and always appear on top with maximum z-index.</p>
                    
                    <form class="mt-3">
                        <div class="mb-3">
                            <label for="exampleInput" class="form-label">Example Input</label>
                            <input type="text" class="form-control" id="exampleInput" placeholder="Type something...">
                        </div>
                        <button type="button" class="btn btn-primary" onclick="showFormSuccessMessage()">Submit (Show Success Toast)</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Example JavaScript functions to demonstrate the messaging system
// All messages now appear as toasts in the top-right corner

function showSuccessMessage() {
    window.messageSystem.showToast('Operation completed successfully!', 'success');
}

function showErrorMessage() {
    window.messageSystem.showToast('An error occurred while processing your request.', 'error');
}

function showInfoMessage() {
    window.messageSystem.showToast('Here\'s some helpful information for you.', 'info');
}

function showWarningMessage() {
    window.messageSystem.showToast('Please be careful with this action.', 'warning');
}

function showMultipleMessages() {
    window.messageSystem.showToast('First message', 'info');
    setTimeout(() => window.messageSystem.showToast('Second message', 'success'), 500);
    setTimeout(() => window.messageSystem.showToast('Third message', 'warning'), 1000);
}

function showFormSuccessMessage() {
    window.messageSystem.showToast('Form submitted successfully! Your data has been saved.', 'success');
}

// Clear all toast messages
function clearAllMessages() {
    window.messageSystem.clearToasts();
}

// Backward compatibility examples
function showInlineMessage() {
    // This now shows as a toast since all messages are toasts
    window.MessagingSystem.showInlineMessage('This message appears as a toast!', 'info');
}
</script>
{% endblock %}