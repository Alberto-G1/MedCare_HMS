{% extends 'base_public.html' %}

{% load static %}

{% block content %}
<div class="container-fluid min-vh-100 p-0">
    <div class="row g-0 min-vh-100">
        <!-- Left Side - Welcome Message -->
        <div class="col-lg-6 d-flex align-items-center justify-content-center bg-gradient-left">
            <div class="welcome-content text-center text-white p-5">
                <div class="logo-container justify-content-center mb-4">
                    <img src="{% static 'images/logo.png' %}" alt="MedCare Logo" class="welcome-logo">
                </div>
                <h1 class="display-4 fw-bold mb-4 animate-fade-in">Welcome Back</h1>
                <p class="lead mb-4 animate-fade-in-delay">Access your comprehensive healthcare management system</p>
                
                <div class="feature-list mt-5">
                    <div class="feature-item animate-slide-in">
                        <div class="feature-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="feature-text">
                            <h5>Appointment Management</h5>
                            <p>Schedule and manage your healthcare appointments</p>
                        </div>
                    </div>
                    
                    <div class="feature-item animate-slide-in-delay">
                        <div class="feature-icon">
                            <i class="fas fa-file-medical"></i>
                        </div>
                        <div class="feature-text">
                            <h5>Medical Records</h5>
                            <p>Access your complete medical history anytime</p>
                        </div>
                    </div>
                    
                    <div class="feature-item animate-slide-in-delay-2">
                        <div class="feature-icon">
                            <i class="fas fa-prescription"></i>
                        </div>
                        <div class="feature-text">
                            <h5>Prescriptions</h5>
                            <p>View and manage your prescriptions digitally</p>
                        </div>
                    </div>
                </div>
                
                <div class="trust-indicators mt-5 animate-fade-in-delay-2">
                    <div class="d-flex justify-content-center align-items-center gap-4 flex-wrap">
                        <div class="trust-item">
                            <i class="fas fa-shield-alt me-2"></i>
                            <span>Secure & HIPAA Compliant</span>
                        </div>
                        <div class="trust-item">
                            <i class="fas fa-clock me-2"></i>
                            <span>24/7 Access</span>
                        </div>
                        <div class="trust-item">
                            <i class="fas fa-users me-2"></i>
                            <span>10k+ Patients</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Right Side - Login Form -->
        <div class="col-lg-6 d-flex align-items-center justify-content-center bg-light-subtle">
            <div class="login-container p-5 w-100" style="max-width: 480px;">
                <div class="text-center mb-5">
                    <div class="login-header-icon mb-3">
                        <i class="fas fa-sign-in-alt"></i>
                    </div>
                    <h2 class="fw-bold text-dark mb-2">Sign In</h2>
                    <p class="text-muted">Enter your credentials to access your account</p>
                </div>
                
                <form method="post" class="needs-validation" novalidate>
                    {% csrf_token %}
                    
                    {% if form.non_field_errors %}
                        <div class="alert alert-danger alert-dismissible fade show modern-alert animate-shake" role="alert">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-exclamation-triangle me-3 fs-5"></i>
                                <div>
                                    {% for error in form.non_field_errors %}
                                        {{ error }}
                                    {% endfor %}
                                </div>
                            </div>
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    {% endif %}
                    
                    <div class="mb-4">
                        <label for="username" class="form-label fw-semibold text-dark mb-2">Username or Email</label>
                        <div class="input-group modern-input">
                            <span class="input-group-text">
                                <i class="fas fa-user text-primary"></i>
                            </span>
                            <input type="text" class="form-control {% if form.username.errors %}is-invalid{% endif %}" 
                                   id="username" name="username" placeholder="Enter your username or email" 
                                   value="{{ form.username.value|default:'' }}" required>
                        </div>
                        {% if form.username.errors %}
                            <div class="invalid-feedback d-block mt-2">
                                <i class="fas fa-exclamation-circle me-1"></i>
                                {% for error in form.username.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    
                    <div class="mb-4">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <label for="password" class="form-label fw-semibold text-dark mb-0">Password</label>
                            <a href="#" class="text-decoration-none small fw-medium forgot-link">Forgot Password?</a>
                        </div>
                        <div class="input-group modern-input">
                            <span class="input-group-text">
                                <i class="fas fa-lock text-primary"></i>
                            </span>
                            <input type="password" class="form-control {% if form.password.errors %}is-invalid{% endif %}" 
                                   id="password" name="password" placeholder="Enter your password" required>
                            <button class="btn btn-outline-secondary modern-toggle" type="button" id="togglePassword">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        {% if form.password.errors %}
                            <div class="invalid-feedback d-block mt-2">
                                <i class="fas fa-exclamation-circle me-1"></i>
                                {% for error in form.password.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    
                    <div class="mb-4">
                        <div class="form-check modern-checkbox">
                            <input type="checkbox" class="form-check-input" id="rememberMe" name="remember_me">
                            <label class="form-check-label text-muted fw-medium" for="rememberMe">
                                Remember me
                            </label>
                        </div>
                    </div>
                    
                    <div class="d-grid mb-4">
                        <button type="submit" class="btn btn-primary-modern btn-lg fw-semibold py-3 position-relative overflow-hidden">
                            <span class="btn-text">
                                <i class="fas fa-sign-in-alt me-2"></i>Sign In to MedCare
                            </span>
                            <div class="btn-ripple"></div>
                        </button>
                    </div>
                    
                    <div class="divider my-4">
                        <span class="divider-text">Or continue with</span>
                    </div>
                    
                    <div class="d-grid gap-2 mb-4">
                        <button type="button" class="btn btn-google modern-social-btn">
                            <i class="fab fa-google me-2"></i>Continue with Google
                        </button>
                    </div>
                </form>
                
                <div class="text-center mt-4">
                    <p class="mb-0 text-muted">Don't have an account? 
                        <a href="{% url 'accounts:register' %}" class="text-decoration-none fw-semibold register-link">Create Account</a>
                    </p>
                </div>
                
                <div class="security-notice mt-4 p-3 rounded-3">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-shield-alt text-success me-2"></i>
                        <small class="text-muted">Your data is protected with 256-bit SSL encryption</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
:root {
    --primary-teal: #0E7490;
    --primary-dark-teal: #0C4A6E;
    --sky-blue: #0284C7;
    --light-sky-blue: #38BDF8;
    --background-light: #F1F5F9;
    --background-white: #FFFFFF;
    --accent-blue: #14B8A6;
    --success-green: #10B981;
    --text-dark: #1E293B;
    --shadow-light: rgba(15, 23, 42, 0.05);
    --shadow-medium: rgba(15, 23, 42, 0.15);
    --shadow-strong: rgba(15, 23, 42, 0.25);
}

.min-vh-100 {
    min-height: 100vh;
}

/* Left Side Gradient Background */
.bg-gradient-left {
    background: linear-gradient(135deg, var(--primary-teal) 0%, var(--primary-dark-teal) 50%, var(--sky-blue) 100%);
    position: relative;
    overflow: hidden;
}

.bg-gradient-left::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
        radial-gradient(circle at 20% 80%, rgba(56, 189, 248, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(20, 184, 166, 0.3) 0%, transparent 50%);
    pointer-events: none;
}

.welcome-content {
    position: relative;
    z-index: 2;
    max-width: 500px;
}

.welcome-logo {
    height: 100px;
    width: 100px;
    /* border-radius: 16px; */
    /* box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3); */
}

/* Feature List Styling */
.feature-list {
    text-align: left;
}

.feature-item {
    display: flex;
    align-items: flex-start;
    margin-bottom: 2rem;
    padding: 1.5rem;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    transition: all 0.3s ease;
}

.feature-item:hover {
    transform: translateX(10px);
    background: rgba(255, 255, 255, 0.15);
}

.feature-icon {
    flex-shrink: 0;
    width: 48px;
    height: 48px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 1rem;
    font-size: 1.2rem;
}

.feature-text h5 {
    margin-bottom: 0.5rem;
    font-weight: 600;
}

.feature-text p {
    margin: 0;
    opacity: 0.9;
    font-size: 0.9rem;
}

/* Trust Indicators */
.trust-indicators {
    opacity: 0.9;
}

.trust-item {
    font-size: 0.85rem;
    padding: 0.5rem 1rem;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    backdrop-filter: blur(5px);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

/* Right Side Styling */
.bg-light-subtle {
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
}

.login-header-icon {
    width: 64px;
    height: 64px;
    background: linear-gradient(135deg, var(--primary-teal) 0%, var(--sky-blue) 100%);
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
    color: white;
    font-size: 1.5rem;
    box-shadow: 0 8px 24px var(--shadow-medium);
}

/* Modern Form Styling */
.modern-input .input-group-text {
    background: white;
    border: 2px solid #e2e8f0;
    border-right: none;
    border-radius: 12px 0 0 12px;
    padding: 0.875rem 1rem;
}

.modern-input .form-control {
    border: 2px solid #e2e8f0;
    border-left: none;
    border-radius: 0 12px 12px 0;
    padding: 0.875rem 1rem;
    font-size: 0.95rem;
    transition: all 0.3s ease;
    background: white;
}

.modern-input .form-control:focus {
    border-color: var(--sky-blue);
    box-shadow: 0 0 0 0.25rem rgba(2, 132, 199, 0.1);
    background: white;
}

.modern-input .form-control:focus + .input-group-text,
.modern-input:focus-within .input-group-text {
    border-color: var(--sky-blue);
    background: white;
}

.modern-toggle {
    border: 2px solid #e2e8f0;
    border-left: none;
    border-radius: 0 12px 12px 0;
    background: white;
    color: var(--text-dark);
    transition: all 0.3s ease;
}

.modern-toggle:hover {
    background: var(--background-light);
    color: var(--sky-blue);
}

/* Modern Checkbox */
.modern-checkbox .form-check-input {
    width: 1.2em;
    height: 1.2em;
    border: 2px solid #cbd5e1;
    border-radius: 4px;
    transition: all 0.2s ease;
}

.modern-checkbox .form-check-input:checked {
    background-color: var(--success-green);
    border-color: var(--success-green);
}

.modern-checkbox .form-check-input:focus {
    box-shadow: 0 0 0 0.25rem rgba(16, 185, 129, 0.1);
}

/* Modern Primary Button */
.btn-primary-modern {
    background: linear-gradient(135deg, var(--success-green) 0%, var(--accent-blue) 100%);
    border: none;
    border-radius: 12px;
    color: white;
    font-weight: 600;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    box-shadow: 0 4px 16px rgba(16, 185, 129, 0.3);
}

.btn-primary-modern:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(16, 185, 129, 0.4);
    color: white;
}

.btn-primary-modern:active {
    transform: translateY(0);
}

/* Button Ripple Effect */
.btn-ripple {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
}

.btn-primary-modern:active .btn-ripple {
    width: 300px;
    height: 300px;
}

/* Social Button */
.btn-google {
    background: white;
    border: 2px solid #e2e8f0;
    color: var(--text-dark);
    font-weight: 500;
    padding: 0.875rem 1.5rem;
    border-radius: 12px;
    transition: all 0.3s ease;
}

.btn-google:hover {
    background: #f8fafc;
    border-color: #cbd5e1;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px var(--shadow-light);
    color: var(--text-dark);
}

/* Divider */
.divider {
    position: relative;
    text-align: center;
}

.divider::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, #cbd5e1, transparent);
}

.divider-text {
    background: #f8fafc;
    padding: 0 1.5rem;
    color: #64748b;
    font-size: 0.875rem;
    font-weight: 500;
}

/* Links */
.forgot-link {
    color: var(--sky-blue);
    transition: all 0.2s ease;
}

.forgot-link:hover {
    color: var(--primary-teal);
}

.register-link {
    color: var(--success-green);
    transition: all 0.2s ease;
}

.register-link:hover {
    color: var(--accent-blue);
}

/* Security Notice */
.security-notice {
    background: rgba(16, 185, 129, 0.05);
    border: 1px solid rgba(16, 185, 129, 0.1);
}

/* Modern Alert */
.modern-alert {
    border: none;
    border-radius: 12px;
    border-left: 4px solid #dc2626;
    background: #fef2f2;
    box-shadow: 0 4px 12px rgba(220, 38, 38, 0.1);
}

/* Animations */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes slideIn {
    from { opacity: 0; transform: translateX(-30px); }
    to { opacity: 1; transform: translateX(0); }
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}

.animate-fade-in {
    animation: fadeIn 0.8s ease forwards;
}

.animate-fade-in-delay {
    animation: fadeIn 0.8s ease 0.2s forwards;
    opacity: 0;
}

.animate-fade-in-delay-2 {
    animation: fadeIn 0.8s ease 0.4s forwards;
    opacity: 0;
}

.animate-slide-in {
    animation: slideIn 0.8s ease 0.6s forwards;
    opacity: 0;
}

.animate-slide-in-delay {
    animation: slideIn 0.8s ease 0.8s forwards;
    opacity: 0;
}

.animate-slide-in-delay-2 {
    animation: slideIn 0.8s ease 1s forwards;
    opacity: 0;
}

.animate-shake {
    animation: shake 0.5s ease;
}

/* Responsive Design */
@media (max-width: 991.98px) {
    .row.g-0 {
        flex-direction: column;
    }
    
    .col-lg-6:first-child {
        order: 2;
        min-height: 40vh;
    }
    
    .col-lg-6:last-child {
        order: 1;
        min-height: 60vh;
    }
    
    .feature-list {
        display: none;
    }
    
    .welcome-content {
        padding: 2rem !important;
    }
    
    .login-container {
        padding: 2rem !important;
    }
}

@media (max-width: 575.98px) {
    .welcome-content {
        padding: 1.5rem !important;
    }
    
    .login-container {
        padding: 1.5rem !important;
    }
    
    .feature-item {
        margin-bottom: 1rem;
        padding: 1rem;
    }
}

/* Loading states */
.btn-primary-modern:disabled {
    opacity: 0.7;
    cursor: not-allowed;
    transform: none;
}

.btn-primary-modern:disabled:hover {
    transform: none;
    box-shadow: 0 4px 16px rgba(16, 185, 129, 0.3);
}

/* Focus states for accessibility */
.modern-input .form-control:focus,
.btn-primary-modern:focus,
.btn-google:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(2, 132, 199, 0.1);
}

/* High contrast support */
@media (prefers-contrast: high) {
    .feature-item {
        border: 2px solid rgba(255, 255, 255, 0.5);
    }
    
    .modern-input .form-control {
        border-width: 3px;
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}
</style>

<script>
// Password visibility toggle
document.getElementById('togglePassword').addEventListener('click', function() {
    const passwordInput = document.getElementById('password');
    const icon = this.querySelector('i');
    
    if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
    } else {
        passwordInput.type = 'password';
        icon.classList.remove('fa-eye-slash');
        icon.classList.add('fa-eye');
    }
});

// Form validation
(function() {
    'use strict';
    var forms = document.querySelectorAll('.needs-validation');
    Array.prototype.slice.call(forms).forEach(function(form) {
        form.addEventListener('submit', function(event) {
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
            }
            form.classList.add('was-validated');
        }, false);
    });
})();

// Button loading state
// document.querySelector('.btn-primary-modern').addEventListener('click', function(e) {
//     if (this.closest('form').checkValidity()) {
//         const originalText = this.innerHTML;
//         this.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Signing in...';
//         this.disabled = true;
        
//         // Re-enable after 5 seconds as fallback
//         setTimeout(() => {
//             this.innerHTML = originalText;
//             this.disabled = false;
//         }, 5000);
//     }
// });

// Enhanced input focus effects
document.querySelectorAll('.form-control').forEach(input => {
    input.addEventListener('focus', function() {
        this.closest('.input-group').classList.add('focused');
    });
    
    input.addEventListener('blur', function() {
        this.closest('.input-group').classList.remove('focused');
    });
});

// Smooth scroll for mobile
if (window.innerWidth <= 991) {
    document.querySelector('.col-lg-6:last-child').scrollIntoView({ 
        behavior: 'smooth', 
        block: 'start' 
    });
}
</script>
{% endblock %}

{% block title %}Login - MedCare HMS{% endblock %}